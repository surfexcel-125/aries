<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Workspace — Aries (project_detail)</title>
<link rel="stylesheet" href="main.css" />
<style>
:root{
  --accent:#0b74ff; --muted:#6b7280; --panel:#ffffffee; --bg:#ffffff;
  --grid-color:rgba(15,23,42,0.04); --node-shadow:0 10px 28px rgba(15,23,42,0.08);
  --link-color:#0f172a; --link-selected:#ff7a59;
}
html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;background:var(--bg)}
.site-header{display:flex;align-items:center;gap:10px;padding:10px 14px;border-bottom:1px solid #f1f1f1;background:#fff;position:sticky;top:0;z-index:40}
.icon-btn{background:transparent;border:0;font-size:18px;cursor:pointer;padding:6px;border-radius:999px}
.header-title{font-weight:700;font-size:0.98rem}
.btn{padding:8px 12px;border-radius:8px;border:0;cursor:pointer;font-weight:600;font-size:0.9rem}
.btn.primary{background:var(--accent);color:#fff}
.btn.ghost{background:transparent;color:var(--muted);border:1px solid #e5e7eb}
.header-right{margin-left:auto;display:flex;align-items:center;gap:8px}
.zoom-ind{padding:6px 8px;border-radius:8px;border:1px solid #e5e7eb;background:#fff;font-weight:600;font-size:0.85rem}

.viewport{position:relative;height:calc(100vh - 56px);overflow:hidden;background:var(--bg)}
.pan-layer{position:absolute;inset:0;touch-action:none}
.board{position:absolute;left:50%;top:50%;transform-origin:0 0;will-change:transform}
.canvas{position:relative;width:2200px;height:1600px;background:transparent;margin:0;overflow:visible}

/* nodes */
.node{position:absolute;min-width:160px;max-width:420px;padding:12px 14px;border-radius:10px;background:#fff;border:1px solid rgba(0,0,0,0.06);box-shadow:var(--node-shadow);cursor:grab;user-select:none;z-index:8}
.node:active{cursor:grabbing}
.node .title{margin:0 0 6px;font-weight:700;font-size:0.98rem}
.node .body{margin:0;font-size:0.9rem;color:var(--muted);white-space:pre-wrap}
.node .mini{position:absolute;right:8px;top:8px;display:flex;gap:6px}
.node-shape-soft{border-radius:16px}
.node-shape-pill{border-radius:999px}
.node-shape-outline{background:transparent;border-style:dashed}

/* floating tools */
.floating-tools{position:fixed;left:14px;top:62px;width:260px;padding:10px;background:var(--panel);border-radius:12px;box-shadow:0 16px 40px rgba(15,23,42,0.18);backdrop-filter:blur(8px);z-index:50;opacity:0;pointer-events:none;transform:translateY(-8px);transition:opacity .16s,transform .16s}
.floating-tools.open{opacity:1;pointer-events:auto;transform:none}
.tool-row{display:flex;flex-wrap:wrap;gap:6px}
.tool-btn{padding:6px 8px;border-radius:8px;background:#f3f4f6;border:0;font-size:0.85rem;cursor:pointer}

/* bottom zoom */
.bottom-zoom{position:fixed;left:16px;bottom:16px;z-index:45;display:flex;gap:6px}
.zoom-btn{width:34px;height:34px;border-radius:999px;border:1px solid #e5e7eb;background:#fff;font-size:18px;cursor:pointer;box-shadow:0 10px 30px rgba(15,23,42,0.16)}

/* grid panel */
.grid-panel{position:fixed;right:16px;bottom:16px;z-index:45;padding:8px 10px;border-radius:12px;background:#fff;box-shadow:0 10px 30px rgba(15,23,42,0.12);font-size:0.83rem;color:var(--muted);display:flex;gap:8px;align-items:center}
.grid-panel input[type="number"]{width:60px;padding:4px 6px;border-radius:8px;border:1px solid #e5e7eb;font-size:0.8rem}

/* modal */
.modal-backdrop{position:fixed;inset:0;display:none;justify-content:center;align-items:center;background:rgba(0,0,0,0.38);z-index:1200}
.modal{width:380px;max-width:94vw;background:var(--panel);border-radius:12px;padding:16px;box-shadow:0 18px 40px rgba(15,23,42,0.3)}
.field{margin:8px 0;display:flex;flex-direction:column;gap:4px}
.field input[type="text"],.field textarea,.field select,.field input[type="color"]{padding:8px;border-radius:8px;border:1px solid #e5e7eb;font-size:0.9rem}

/* svg link styles + handles */
svg.link-layer{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:6}
.path-line{stroke:var(--link-color);stroke-width:2;stroke-linecap:round;stroke-linejoin:round;fill:none;pointer-events:stroke}
.path-line.selected{stroke:var(--link-selected);stroke-width:3}
.endpoint-handle{r:6; fill:#fff; stroke:#0b74ff; stroke-width:2; cursor:pointer; pointer-events:auto}
.anchor-dot{position:absolute;width:8px;height:8px;border-radius:50%;background:rgba(11,116,255,0.9);transform:translate(-50%,-50%);z-index:11;display:none}

/* small visual niceties */
.connector-shadow{filter:drop-shadow(0 6px 12px rgba(11,116,255,0.04));}

@media (max-width:900px){.canvas{width:1400px;height:1000px}.floating-tools{width:210px}}
</style>
</head>
<body>
  <header class="site-header">
    <button id="menuIcon" class="icon-btn" aria-label="Tools menu">☰</button>
    <button id="backToProjects" class="btn ghost">Projects</button>
    <div class="header-title">Workspace</div>
    <div class="header-right">
      <div id="zoomIndicator" class="zoom-ind">100%</div>
      <button id="saveBoard" class="btn primary">Save</button>
      <button id="exportBtn" class="btn ghost">Export</button>
      <label for="importFile" class="btn ghost" style="cursor:pointer;">Import</label>
      <input id="importFile" type="file" accept="application/json" style="display:none;">
    </div>
  </header>

  <aside id="floatingTools" class="floating-tools" aria-hidden="true">
    <h4>Tools</h4>
    <div class="tool-row">
      <button id="toolAddNode" class="tool-btn">+ Node</button>
      <button id="toolConnector" class="tool-btn">Connector</button>
      <button id="toolDeleteLink" class="tool-btn" disabled>Delete Link</button>
      <button id="toolDeleteNode" class="tool-btn" disabled>Delete Node</button>
    </div>
    <div style="margin-top:10px;font-size:0.9rem;color:var(--muted)">Selected link: <span id="selectedLinkLabel">none</span></div>
  </aside>

  <main class="viewport">
    <div id="panLayer" class="pan-layer" tabindex="0">
      <div id="board" class="board">
        <div id="canvas" class="canvas"></div>
        <!-- SVG inside the board so transform applies equally to nodes and connections -->
        <svg id="svg" class="link-layer" xmlns="http://www.w3.org/2000/svg"></svg>
      </div>
    </div>
  </main>

  <div class="bottom-zoom">
    <button id="zoomOutCorner" class="zoom-btn" aria-label="Zoom out">−</button>
    <button id="zoomInCorner" class="zoom-btn" aria-label="Zoom in">+</button>
  </div>

  <div class="grid-panel">
    <label><input id="showGrid" type="checkbox" checked> Grid</label>
    <label>Size <input id="gridSize" type="number" value="20" min="5" max="200"></label>
    <button id="centerBtn" class="tutorial-btn" style="background:#f3f4f6;">Center</button>
  </div>

  <div id="modal" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal">
      <h3>Block settings</h3>
      <div class="field"><label>Title</label><input id="modalTitle" type="text"></div>
      <div class="field"><label>Body</label><textarea id="modalBody" rows="4"></textarea></div>
      <div class="field"><label>Color</label><input id="modalColor" type="color" value="#ffffff"></div>
      <div class="field"><label>Shape</label>
        <select id="modalShape"><option value="card">Card</option><option value="soft">Soft</option><option value="pill">Pill</option><option value="outline">Outline</option></select>
      </div>
      <div class="modal-actions" style="display:flex;justify-content:space-between;margin-top:12px">
        <button id="deleteBlock" class="btn ghost">Delete</button>
        <div style="display:flex;gap:8px"><button id="cancelModal" class="btn ghost">Cancel</button><button id="saveModal" class="btn primary">Save</button></div>
      </div>
    </div>
  </div>

  <!-- workspace behaviour (separate file) -->
  <script src="workspace.js" defer></script>
  <!-- keep your global app script for other website flows -->
  <script src="app.js" defer></script>
</body>
</html>
